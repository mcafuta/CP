var dictionary=null;var reverseDict=null;var freeLetters=null;var cryptedMessage=null;var frequencyTable=null;var ALPHABET=null;var textDictionary=null;var freeLetterDictionary=null;var chartData=null;var eventLetter=null;var ind=null;function initialize(){var e=new Date;addResetButton();addHeaderText();addNextButton();addCoreLogic();addDisplayLogic();loadChart();var e=new Date;var t=new Date;var r=(t.getTime()-e.getTime())/1e3;console.log(r)}function addDisplayLogic(){var e=document.getElementById("coreLogic");e.appendChild(createFreeLetterDisplay());e.appendChild(newLine());e.appendChild(createMessageDisplay());e.appendChild(newLine());e.appendChild(newFrequencyDisplay())}function createFreeLetterDisplay(){var e=document.createElement("div");e.setAttribute("id","freeLetterDisplay");setFreeLetterDisplayEvent(e);freeLetterDictionary={};var t;for(var r=0;r<ALPHABET.length;r++){t=createFreeLetter(ALPHABET[r]);e.appendChild(t);freeLetterDictionary[ALPHABET[r]]=[t,false]}return e}function createFreeLetter(e){var t=document.createElement("div");t.textContent=e;t.setAttribute("value",e);t.setAttribute("class","freeLetter ui-draggable");setFreeLetterEvent(t);return t}function createMessageDisplay(){var e=document.createElement("div");e.setAttribute("id","messageDisplay");textDictionary={};for(var t=0;t<cryptedMessage.length;t++){var r=cryptedMessage[t];e.appendChild(createWordDisplay(r));if(t<cryptedMessage.length-1){e.appendChild(newSpace())}}return e}function createWordDisplay(e){var t=document.createElement("div");t.setAttribute("class","wordDisplay");var r=null;for(var n=0;n<e.length;n++){var a=e.charAt(n);if(!textDictionary[a]){textDictionary[a]=[]}if(isLetter(a)){t.appendChild(newWordLetter(a))}else{t.appendChild(newUneditableWordLetter(a))}}return t}function newWordLetter(e){var t=document.createElement("div");t.setAttribute("class","wordLetter-t");t.setAttribute("value",e);var r=newInputLetter(e);t.appendChild(r);textDictionary[e].push(r);setWordLetterEvent(t);return t}function newInputLetter(e){var t=document.createElement("input");t.setAttribute("original",e);t.setAttribute("placeholder",e);t.setAttribute("class","textInput-t textInputDisplay-t");t.setAttribute("maxlength","1");setInputLetterEvent(t);return t}function sortDivs(e){var t=e.children().sort(function(e,t){var r=$(e).attr("value").toUpperCase();var n=$(t).attr("value").toUpperCase();return r<n?-1:r>n?1:0});e.append(t)}function newUneditableWordLetter(e){var t=document.createElement("div");t.setAttribute("class","wordLetter-t");t.appendChild(newUneditableMessageCharacter(e));return t}function newUneditableMessageCharacter(e){var t=document.createElement("input");t.setAttribute("class","textInputPunctuation-t");t.setAttribute("value",e);t.disabled=true;t.textContent=e;return t}function newFrequencyDisplay(){var e=document.createElement("div");e.setAttribute("id","frequencyDisplay");var t=0;for(var r in frequencyTable){t++;e.appendChild(newFrequency(r,frequencyTable[r]))}return e}function newFrequency(e,t){var r=document.createElement("div");r.setAttribute("original",e);setFrequencyEvent(r);if(dictionary[e]==null){r.setAttribute("class","letterFrequency");r.textContent=e+" = "+t}else{r.setAttribute("class","letterFrequencySolved");r.textContent=dictionary[e]+" = "+t}return r}function addCoreLogic(){freeLetters=[];reverseDict=[];frequencyTable=[];dictionary={};initAlphabet();cryptedMessage=getCryptedMessage()}function initAlphabet(){ALPHABET=[];var e="A".charCodeAt(0);for(var t=0;t<26;t++){var r=String.fromCharCode(e+t);if(lang==="sl"&&!foreign&&(r==="Q"||r==="W"||r==="X"||r==="Y"))continue;ALPHABET.push(r);freeLetters[r]=true;if(lang==="sl"||foreign){if(r==="C")ALPHABET.push("Č");if(r==="S")ALPHABET.push("Š");if(r==="Z")ALPHABET.push("Ž")}}if(lang==="sl"||foreign){freeLetters["Č"]=true;freeLetters["Š"]=true;freeLetters["Ž"]=true}}function getCryptedMessage(){var e=$("#messageOutput").html("");var t=new Array;e.append(getCryptedMessageParagraph(input));var r=0;var n="";while(r<input.length){var a=input.charAt(r).toUpperCase();if(ind===2){a=a.trim().split(",").join("")}appendFrequency(a);if(!(a==" "||a=="\n")){n+=a}else{if(!n==""){t.push(n)}n=""}if(r==input.length-1){if(!n==""){t.push(n)}n=""}r++}frequencyTable=bySortedValue(frequencyTable);return t}function getCryptedMessageParagraph(e){var t=e.split("");for(var r=0;r<t.length;r++){if(t[r]in reverseDict){t[r]="<span class='messageOutputSolved'>"+t[r]+"</span>"}else{t[r]="<span class=''>"+t[r]+"</span>"}}return t}function appendFrequency(e){if(isLetter(e)){if(frequencyTable[e]!=null){frequencyTable[e]++}else{frequencyTable[e]=1}}}function isLetter(e){e=e.toUpperCase();return e.charCodeAt(0)<91&&e.charCodeAt(0)>=65||e==="Č"||e==="Š"||e==="Ž"}function bySortedValue(e){var t=[];var r=Array();for(var n in e)t.push([n,e[n]]);t.sort(function(e,t){return e[1]<t[1]?-1:e[1]>t[1]?1:0});var a=t.length;while(a--)r[t[a][0]]=t[a][1];return r}function newLine(){return document.createElement("br")}function newSpace(){var e=document.createElement("div");e.setAttribute("class","letter");return e}function hideNavBar(){var e=document.getElementsByClassName("main");for(var t=0;t<e.length;t++){e[t].style.display="none"}}function addResetButton(){var e=document.getElementById("center");if(e.getElementsByTagName("button").length<=1){e.appendChild(resetButton())}}function resetButton(){var e=document.createElement("label");e.setAttribute("value","Reset");e.setAttribute("id","reset");e.setAttribute("class","btn nav-btn glyphicon glyphicon-repeat");e.setAttribute("onclick","reset();");return e}function addNextButton(){var e=document.getElementById("center");if(e.getElementsByTagName("button").length<=1){e.appendChild(nextButton())}}function nextButton(){var e=document.createElement("label");e.setAttribute("value","Next");e.setAttribute("id","next");e.setAttribute("class","btn nav-btn glyphicon glyphicon-play");e.setAttribute("onclick","location.href = next;");return e}function addHeaderText(){var e=document.getElementById("center");e.appendChild(headerText())}function headerText(){var e=document.createElement("h1");e.textContent="Zamenjalka";e.setAttribute("id","headerText");return e}